(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f3d0f0b"],{5319:function(t,e,i){"use strict";var a=i("d784"),r=i("825a"),n=i("7b0b"),s=i("50c4"),o=i("a691"),l=i("1d80"),c=i("8aa5"),d=i("14c3"),u=Math.max,h=Math.min,v=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};a("replace",2,(function(t,e,i,a){var m=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=a.REPLACE_KEEPS_$0,_=m?"$":"$0";return[function(i,a){var r=l(this),n=void 0==i?void 0:i[t];return void 0!==n?n.call(i,r,a):e.call(String(r),i,a)},function(t,a){if(!m&&b||"string"===typeof a&&-1===a.indexOf(_)){var n=i(e,t,this,a);if(n.done)return n.value}var l=r(t),v=String(this),f="function"===typeof a;f||(a=String(a));var g=l.global;if(g){var w=l.unicode;l.lastIndex=0}var k=[];while(1){var $=d(l,v);if(null===$)break;if(k.push($),!g)break;var E=String($[0]);""===E&&(l.lastIndex=c(v,s(l.lastIndex),w))}for(var S="",C=0,L=0;L<k.length;L++){$=k[L];for(var I=String($[0]),F=u(h(o($.index),v.length),0),P=[],U=1;U<$.length;U++)P.push(p($[U]));var x=$.groups;if(f){var A=[I].concat(P,F,v);void 0!==x&&A.push(x);var D=String(a.apply(void 0,A))}else D=y(I,v,F,P,x,a);F>=C&&(S+=v.slice(C,F)+D,C=F+I.length)}return S+v.slice(C)}];function y(t,i,a,r,s,o){var l=a+t.length,c=r.length,d=g;return void 0!==s&&(s=n(s),d=f),e.call(o,d,(function(e,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,a);case"'":return i.slice(l);case"<":o=s[n.slice(1,-1)];break;default:var d=+n;if(0===d)return e;if(d>c){var u=v(d/10);return 0===u?e:u<=c?void 0===r[u-1]?n.charAt(1):r[u-1]+n.charAt(1):e}o=r[d-1]}return void 0===o?"":o}))}}))},"63a4":function(t,e,i){"use strict";i("db85")},"63f6":function(t,e,i){"use strict";i("ff59")},9126:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile"},[i("Profile")],1)},r=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile"},[i("Nav",{on:{"input:change":t.inputChange}}),this.input.length>=1?i("div",{staticClass:"searchContainer"},[i("Heading",{attrs:{title:this.input,search:!0,profile:!0}}),i("SearchList",{attrs:{input:this.input},on:{"update:list":function(e){return t.renderList()}}})],1):t._e(),null!==this.$store.state.user?i("h1",[t._v("Welcome, "+t._s(this.$store.state.user[1]))]):t._e(),i("div",{attrs:{id:"nav"}},[i("div",{staticClass:"navItem"},[i("router-link",{attrs:{to:"/changepassword"}},[t._v("Change password")]),i("span",[t._v(" | ")]),i("router-link",{attrs:{to:"/changeusername"}},[t._v("Change username")])],1),i("div",{staticClass:"navItem"},[t.areyousure?t._e():i("button",{on:{click:t.hideAreYouSure}},[t._v("Delete user")]),t.areyousure?i("div",{staticClass:"areYouSure"},[i("p",[t._v("Are you sure?")]),i("div",{staticClass:"confirmUserDel"},[i("button",{attrs:{id:"yesBtn"},on:{click:t.deleteUser}},[t._v("Yes")]),i("button",{on:{click:t.hideAreYouSure}},[t._v("No")])])]):t._e()])]),t.elements.length>0?i("div",[i("Heading",{attrs:{title:this.title,search:!1,profile:!0}}),i("ul",t._l(t.elements,(function(e){return i("li",{key:e.id},[i("WatchLater",{attrs:{element:e},on:{"del:element":function(e){return t.getListFromDb(this.$store.state.user[0])}}})],1)})),0),t._l(this.elements,(function(e){return i("div",{key:e.id},[i("Information",{attrs:{id:e.id,identity:e.id,movie:e.hasOwnProperty("title")},on:{"hide:info":t.changeInfoVisibility}})],1)}))],2):i("div",[i("Heading",{attrs:{title:this.title,search:!1,profile:!0}}),t._m(0)],1)],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("h2",[t._v("It seems empty here. Get started by adding movies to your watch list!")])])])}],o=(i("4160"),i("ac1f"),i("5319"),i("1276"),i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"backgroundGradient"},[i("img",{staticClass:"backgroundImage",attrs:{src:this.image,alt:"Background image"}})]),i("div",{staticClass:"mediaImg"},[i("img",{attrs:{src:this.image,alt:"Placeholder image"},on:{click:function(e){return t.changeInfoVisibility(t.id)}}})]),i("button",{staticClass:"imgBtn",on:{click:function(e){return t.deleteFromList(t.element.id)}}},[t._v("-")]),i("div",{staticClass:"aboutMedia"},[i("h2",[t._v(t._s(this.title))]),i("h3",[t._v("Rating: "+t._s(this.rating))]),i("p",[t._v(t._s(this.overview))]),null!==t.providers?i("h3",[t._v("Available in:")]):t._e(),i("div",{staticClass:"providers"},t._l(this.providers,(function(e){return i("div",{key:e.index,staticClass:"provider"},[i("img",{staticClass:"logo",attrs:{src:"http://image.tmdb.org/t/p/original/"+e.logo_path,alt:"Placeholder image"},on:{click:function(i){return t.openProvider(e.provider_name)}}})])})),0)])])}),l=[],c=(i("caad"),i("b0c0"),i("2532"),i("bc3a")),d=i.n(c),u={name:"WatchLater",components:{},data:function(){return{title:"",image:"",overview:"",providers:null,rating:""}},props:{input:String,element:Object},created:function(){var t=this;Object.prototype.hasOwnProperty.call(this.element,"title")?d.a.get("https://api.themoviedb.org/3/movie/".concat(this.element.id,"?api_key=7a1108dafa3ea1ef83a43e999a63f38b&language=en-US&append_to_response=watch%2Fproviders")).then((function(e){t.image="http://image.tmdb.org/t/p/w300/".concat(e.data.poster_path),t.title=e.data.title,t.id=e.data.id,t.rating=e.data.vote_average,t.overview=e.data.overview,JSON.stringify(e.data["watch/providers"].results).includes("FI")&&(t.providers=e.data["watch/providers"].results.FI.buy)})):d.a.get("https://api.themoviedb.org/3/tv/".concat(this.element.id,"?api_key=7a1108dafa3ea1ef83a43e999a63f38b&language=en-US&append_to_response=watch%2Fproviders")).then((function(e){t.image="http://image.tmdb.org/t/p/w300/".concat(e.data.poster_path),t.title=e.data.name,t.id=e.data.id,t.rating=e.data.vote_average,t.overview=e.data.overview,JSON.stringify(e.data["watch/providers"].results).includes("FI")&&(t.providers=e.data["watch/providers"].results.FI.flatrate)}))},methods:{addToList:function(t){this.$store.commit("saveMedia",t)},deleteFromList:function(t){this.$store.commit("deleteFromProfile",t)},changeInfoVisibility:function(t){this.infoVisible=!this.infoVisible;var e=document.getElementById(t);this.infoVisible?e.style.display="block":e.style.display="none"},openProvider:function(t){window.open("https://www.google.com/search?q=".concat(t+" "+this.title),"_blank")}}},h=u,v=(i("63a4"),i("2877")),f=Object(v["a"])(h,o,l,!1,null,"bdf69e84",null),g=f.exports,p=i("216c"),m=i("b43e"),b=i("8a7c"),_=i("3320"),y={name:"Profile",components:{WatchLater:g,Nav:p["a"],Heading:m["a"],Information:b["a"],SearchList:_["a"]},data:function(){return{input:"",elements:{},title:"Watch Later",areyousure:!1,username:""}},created:function(){null===this.$store.state.user?this.$router.push("/login"):(this.getListFromDb(this.$store.state.user[0]),this.username=this.$store.state.user[1])},methods:{inputChange:function(t){this.input=t},changeInfoVisibility:function(t){this.infoVisible=!this.infoVisible;var e=document.getElementById(t);this.infoVisible?e.style.display="block":e.style.display="none"},getListFromDb:function(t){var e,i=this;try{e="http://localhost:8081/backend/getList",d.a.get(e,{params:{user_id:t}}).then((function(t){if("Error"===t.data)console.log("Didn't get anything from db");else{console.log(t.data);var e=t.data;e=e.split(",");var a=[];e.forEach((function(t){return a.push(t)})),console.log("Altered result from db: "+a),i.$store.commit("saveMediaList",a),i.renderList()}})).catch((function(t){console.log("Error in axios.get (getList): "+t)}))}catch(a){console.log("Error in async: "+a)}},renderList:function(){console.log("Rendering list...");for(var t,e=this.$store.state.dbList,i=[],a=0;a<this.$store.state.dbList.length;a++)"tv"===e[a].replace(/[0-9]/g,"")&&(t="https://api.themoviedb.org/3/tv/".concat(e[a].replace(/\D/g,""),"?api_key=7a1108dafa3ea1ef83a43e999a63f38b&language=en-US&append_to_response=watch%2Fproviders")),"movie"===e[a].replace(/[0-9]/g,"")&&(t="https://api.themoviedb.org/3/movie/".concat(e[a].replace(/\D/g,""),"?api_key=7a1108dafa3ea1ef83a43e999a63f38b&language=en-US&append_to_response=watch%2Fproviders")),d.a.get(t).then((function(t){i.push(t.data)})).catch((function(t){console.log("Error in list rendering: "),console.log(t)})),console.log("List render result: "+i);this.elements=i,this.$store.state.movies=i},hideAreYouSure:function(){console.log("Deleting user.."),this.areyousure=!this.areyousure},deleteUser:function(){var t=this;try{var e="http://localhost:8081/backend/deleteuser";d.a.delete(e,{data:{user_id:this.$store.state.user[0]}}).then((function(e){console.log(e),"Success"===e.data?(console.log("User deleted successfully."),t.$store.commit("delUser"),t.$router.push("/")):console.log("Failed to delete user.")})).catch((function(t){console.log("Error in axios.delete. (deleteuser): "+t)}))}catch(i){console.log("Error in async: "+i)}}}},w=y,k=(i("63f6"),Object(v["a"])(w,n,s,!1,null,"c452f322",null)),$=k.exports,E={name:"ProfileView",components:{Profile:$}},S=E,C=Object(v["a"])(S,a,r,!1,null,"5875bfad",null);e["default"]=C.exports},db85:function(t,e,i){},ff59:function(t,e,i){}}]);
//# sourceMappingURL=chunk-2f3d0f0b.c67127fc.js.map